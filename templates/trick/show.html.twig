{% extends 'base.html.twig' %}

{% block title %}Trick{% endblock %}

{% block body %}
    <!-- Full Page Intro -->
    {% set url = asset('uploads/' ~ trick.imgs[0].fileName) %}

    <div class="mt-container view full-page-intro" style="background-image: url('{{ url }}'); background-repeat: no-repeat; background-size:cover; background-position:center center">

        <!-- Content -->
        <div class="container">
            <!--edit and delete button-->
            <div class="row mr-auto">
                <a class="btn btn-primary" href="{{ path('trick_edit', {'slug': trick.slug}) }}"><i class="fas fa-pencil-alt"></i></a>
                {{ include('trick/_delete_form_btn.html.twig') }}
            </div>
            <!--./edit and delete button-->

            <!--Grid row-->
            <div class="row wow fadeIn">
                <!--Grid column-->
                <div class="col-md-12 mb-4 white-text text-center text-md-left">
                    <h1 class="display-4 font-weight-bold text-center"> {{ trick.title }} </h1>
                    <hr class="hr-light">
                </div>
                <!--/Grid column-->
            </div>
            <!--/Grid row-->
        </div>
        <!-- /Content -->
    </div>
    <!-- /Full Page Intro -->
	
    <!--rest-->
	<div class="container" style="margin-top:30px">
		
         <!-- IMAGES ET VIDEOS-->
        <div class="row px-1">
            <!--IMAGES-SLIDER-->
            <div class="col-md-6 ">
                <h3 class="h2 text-center">ILLUSTRATIONS</h3>

                <div id="carouselExampleIndicators" class="carousel slide" data-ride="carousel" style="border: 2px black solid">
                    <ol class="carousel-indicators">
                        {% for img in trick.imgs %}
                            <li data-target="#carouselExampleIndicators" data-slide-to="{{ loop.index0 }}" {% if loop.first %} class="active"{% endif %}></li>
                        {% endfor %}
                    </ol>
                    <div class="carousel-inner">
                        {% for img in trick.imgs %}
                            <div class="carousel-item {% if loop.first %}active{% endif %}">
                                <img src="{{ asset('uploads/' ~ img.fileName)}}" class="d-block w-100" alt="{{ img.alt }}" width="100%" height="400">
                            </div>
                        {% endfor %}
                    </div>

                    <a class="carousel-control-prev" href="#carouselExampleIndicators" role="button" data-slide="prev">
                        <span class="carousel-control-prev-icon" aria-hidden="true"></span>
                        <span class="sr-only">Previous</span>
                    </a>
                    <a class="carousel-control-next" href="#carouselExampleIndicators" role="button" data-slide="next">
                        <span class="carousel-control-next-icon" aria-hidden="true"></span>
                        <span class="sr-only">Next</span>
                    </a>
                </div>

            </div>
            <!--MOVIE-->
            <div class="col-md-6 ">
                <h3 class="h2 text-center">VIDEO</h3>
                <iframe width="560" height="400" src="https://www.youtube.com/embed/{{ trick.movie.src}}" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen></iframe>
            </div>
            <!--/.MOVIE-->

        </div>

        <!-- Description -->
		<div class="row">
			<div class="col-xl-12 col-md-12">
                <div class="mt-4 d-flex justify-content-center">
                    {{ trick.description }}
                </div>	
			</div>
		</div>
		<!-- /Description -->

		<!-- Badges -->
		<div class="row">
			<div class="col-xl-12 col-md-12">
				<p class="text-center mt-4">
					<span class="btn btn-primary">Date de publication: {{ trick.createdAt|date('Y-m-d H:i:s') }} </span>
					<span class="btn badge-primary">Date de modification: {{ trick.updatedAt ? trick.updatedAt|date('Y-m-d H:i:s') : '' }} </span>
					<span class="btn badge-primary">Groupe: {{ trick.category.title }}</span>
				</p>
			</div>
		</div>
		<!-- /.Badges -->

        <!-- new comment -->
        <!-- new comment form -->
        <hr class="col-lg-6 col-md-6" style="width:100%; background-color:black;"/>
        <div class="row">
            <div align="center" class="col-xl-12 col-md-12">
                <h1>Commentaires</h1>
                
                {{ include('comment/_form.html.twig') }}
            </div>
        </div>
        <hr class="col-lg-6 col-md-6" style="width:100%; background-color:black;"/>
        <!--/new comment-->

        <!--Old comments-->
        {% if trick.comments | length > 0 %}
            {% for comment in trick.comments %}
                <div class="row justify-content-center">
                    <div class="col-xl-6 col-md-6 mt-2" align="center">
                        <!--Comment head-->
                        <div class="row bg-primary justify-content-center">
                            <!--Mettre l'avars de l'author/l'user-->
                            <div class="col-lg-3 col-md-3">
                                <img src="toto.jpg" alt="toto"/>
                            </div>
                            <div class="col-lg-9 col-md-9">
                                {{comment.author}}
                            </div>
                        </div>
                        <!--/Comment head-->
                        <!--Comment body-->
                        <div class="row justify-content-center">
                            <div class="col-lg-12 col-md-12">
                                {{comment.content}}
                            </div>
                        </div>
                        <!--/Comment body-->

                        <!--Comment footer-->
                        <div class="row justify-content-center card-footer">
                            <span> Crée le: {{ comment.createdAt ? comment.createdAt|date('d-m-Y H:i') : '' }}</span>  | 
                            <span> Dernière modification: {{ comment.updatedAt ? comment.updatedAt|date('d-m-Y H:i') : '' }}</span>
                        </div>
                        <!--./Comment footer-->    
                    </div>
                </div>
            {% endfor %}
        {% else %}
            <p>Il n'y a aucun commentaire pour cet trick. </p>
        {% endif %}
        <!--/.Old comments -->

        <!--load more-->
        <p class="text-center">
            <a href="#" class="btn">Load more</a>
        </p>
        <!--load more-->
	</div>	
    <!--/rest -->

{% endblock %}
